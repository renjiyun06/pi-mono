#!/bin/bash
# Post-commit hook: show understanding debt reminder
# Install: cp this to .git/hooks/post-commit && chmod +x .git/hooks/post-commit

# Find understand command
if command -v understand-code &>/dev/null; then
    UNDERSTAND_CMD="understand-code"
else
    UNDERSTAND_CMD="npx -y understand-code"
fi

# Count files with understanding debt
DEBT_COUNT=$($UNDERSTAND_CMD debt 2>/dev/null | grep "üî¥" | wc -l)

if [ "$DEBT_COUNT" -gt 5 ]; then
    echo ""
    echo "‚ö†Ô∏è  Understanding debt: $DEBT_COUNT unreviewed code files"
    echo "   Run: $UNDERSTAND_CMD debt"
    echo ""
fi
