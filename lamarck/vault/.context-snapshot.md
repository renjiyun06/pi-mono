# Context Snapshot

Generated: 2026-02-16 18:11:15
Branch: `autopilot-0008`

## Recent Commits

```
c629d8f4 issue: ollama installed but no models — update status
8d6cd46e memory: add Understand product patterns and pipeline quality rules to procedural memory
ee78af35 daily: segment 34 — audio quality fix (48kHz), validator enhancement, launch sequence prep, 183 commits
9c057224 feat(validate): detect duplicate narration across sections
7ee12c52 fix(render): generate silence at 48kHz stereo to match final output quality
4030a4a2 fix(render): upsample audio to 48kHz broadcast quality
6306b392 daily: segment 33 — fix propagation complete, all Understand surfaces aligned, 179 commits
6aee9b1f fix(understand): propagate system message + JSON extraction fixes to CLI and web app
342f89ea docs: update review guide with latest Understand improvements and MCP competitive analysis
c7bf57bb daily: segment 32 — sub-agent stress test found+fixed 2 bugs, 176 commits
066e5c8c fix(understand): use system message to prevent self-referential code confusion
d4481c86 fix(understand): robust JSON extraction — handle text before/after JSON in LLM responses
084d3cc3 daily: segment 31 — quiz prompt quality fix, 5 self-quiz results, MCP competitive analysis
e7274637 exploration 084: MCP competitive landscape — zero competitors for code comprehension quiz
c4077bfa research: MCP adoption data — 97M monthly downloads, 10K servers, Linux Foundation
884a2093 fix(understand): reject trivially small files instead of generating filler questions
7cd9ae7e fix(understand): align all quiz prompts — app.html + CLI now match MCP server
d1746a16 fix(understand): improve quiz prompt — test file-specific knowledge, not general patterns
c0528c83 exploration 083 update: 5 quiz results + product limitation discovered
e284e941 daily: segment 30 — Manim verification gap, self-quiz data, npm prep, canvas, Reddit signals
```

## Open Issues

- douyin-captcha: Occasional CAPTCHA when downloading Douyin videos via browser automation
- gh-cli-not-authenticated: gh CLI not authenticated, cannot access GitHub issues/PRs
- multi-agent-feedback: Multi-agent feedback mechanism too heavy, needs a lighter approach
- ollama-not-installed: Ollama installed but no models pulled yet — need to pull a 7B model

## Priority Notes

These files contain critical operational knowledge:
- `/home/lamarck/pi-mono/lamarck/vault/Notes/ai-image-generation-openrouter.md`
- `/home/lamarck/pi-mono/lamarck/vault/Notes/browser-automation.md`
- `/home/lamarck/pi-mono/lamarck/vault/Notes/edge-tts.md`
- `/home/lamarck/pi-mono/lamarck/vault/Notes/extensions.md`
- `/home/lamarck/pi-mono/lamarck/vault/Notes/playwright.md`
- `/home/lamarck/pi-mono/lamarck/vault/Notes/task-system.md`
- `/home/lamarck/pi-mono/lamarck/vault/Notes/tts-duration-calibration.md`
- `/home/lamarck/pi-mono/lamarck/vault/Notes/web-search-api-alternatives.md`
- `/home/lamarck/pi-mono/lamarck/vault/Notes/wsl-port-forwarding.md`

## Today's Daily Note

...
gated
- System message separation + JSON bracket extraction now in all 3 surfaces (MCP, CLI, web app)
- Previously only MCP server had the fixes — CLI and web app were still vulnerable

### Review Guide Updated
- Added latest Understand improvements: prompt quality, JSON parsing, system message, stress test results
- Added MCP competitive landscape summary

### Context Snapshot Tool
- Verified `context-snapshot.ts` works — generates pre-computed restore file
- Not adding cron yet (manual restore is fast enough)

### Debt Command Validated
- Ran `understand debt --since HEAD~50` — correctly identifies 11 changed files, priorities by change volume
- mcp-server.ts shows 6 commits (most active) — matches reality

### State: 179 commits
Fix propagation complete. All Understand surfaces aligned. Now genuinely in diminishing returns — everything blocked on Ren.

## Segment 34: Pipeline Quality + Publication Prep

### Audio Quality Fix
- Edge-tts outputs 24kHz mono MP3 → final video was 24kHz stereo AAC (below broadcast)
- Added `-ar 48000 -ac 2` to BGM mixing and final combination steps
- Silence generation also upgraded from 24kHz mono to 48kHz stereo
- All future renders will have broadcast-quality audio

### Validator Enhancement
- Added duplicate narration detection — catches copy-paste errors from spec generation
- Ran on all 14 DeepDive + 4 escalation specs: zero duplicates found (specs are clean)

### Publication Launch Sequence
- Created `tmp/publish-douyin/launch-sequence.json` with first 5 videos ready to publish
- Each entry has all fields needed by publish-douyin task + positioning notes
- Ren can modify visibility from "private" to "public" when ready

### Spec Inventory
- 50 total specs: 14 DeepDive, 10 Spotlight, 10 GradientFlow, 8 AIInsight, 7 NeuralViz, 2 carousel
- All reference valid compositions; zero broken references

### State: 183 commits
Pipeline quality improvements that matter for actual publishing. Audio was below broadcast quality — now fixed.

